<div class="list-page {{theme}}">
    <div class="loading" *ngIf="loading">
        <!-- <fa-icon [icon]="['fas', 'spinner']" [pulse]="true"></fa-icon> -->
        <p>Loading ...</p>
        <p *skeleton="loading;
                        height: '20px';
                        width: '600px'">
            {{ category.title }}
        </p>
        <section class="flex">

            <ng-container *skeleton="loading;
                                   repeat: 5;
                                   className: 'mb-2';
                                   height: '100px';">

                <div *ngFor="let num of [1,2, 3]">
                    {{ num }}
                </div>

            </ng-container>
        </section>
        <ng-container *skeleton="loading;
                                 repeat: 5;
                                 className: 'm-2';
                                 height: '30px';
                                 width: 'rand'">

            <div *ngFor="let num of [1,2, 3, 4, 5]">
                {{ num }}
            </div>

        </ng-container>
    </div>
    <div class="list" *ngIf="!loading">
        <div class="list-header">
            <h1><a routerLink="/category/{{category.id}}">{{category.title}}</a></h1>
            <h2>{{topic.title}}</h2>
            <a *ngIf="can_post" routerLink="/post/create">Create new Post</a>
        </div>
        <div class="list-body">
            <div *ngIf="topic.user" class="topic">
                <div *ngIf="can_edit" class="edit-buttons">
                    <button type="button">Edit</button>
                    <button type="button">Delete</button>
                </div>
                <div class="user-card">
                    <app-avatar [user]="topic.user"></app-avatar>
                    <div class="text">
                        <a routerLink="/user/profile/{{topic.user.id}}">{{topic.user.nick}}</a>
                        <small>{{topic.user.rol}}</small>
                    </div>
                </div>
                <div class="topic-body">
                    <div class="topic-header">
                        <p>{{topic.created_at | date}}</p>
                    </div>
                    <p [innerHTML]="topic.content"></p>
                </div>
            </div>
            <div class="posts">
                <div class="post" *ngFor="let post of posts">
                    <div class="user-card">
                        <app-avatar [user]="post.user"></app-avatar>
                        <div class="text">
                            <a routerLink="/user/profile/{{post.user.id}}">{{post.user.nick}}</a>
                            <small>{{post.user.rol}}</small>
                        </div>
                    </div>
                    <div class="post-body">
                        <div class="post-header">
                            <p>{{post.created_at | date}}</p>
                        </div>
                        <p [innerHTML]="post.content"></p>
                        <div *ngIf="post.created_at != post.updated_at" class="post-footer">
                            <p>{{post.created_at | date}}</p>
                        </div>
                    </div>
                    <div *ngIf="post.can_edit" class="edit-buttons">
                        <button type="button">Edit</button>
                        <button type="button" (click)="deletePost(post.id)">Delete</button>
                    </div>
                </div>
            </div>
            <div class="editor-parent" *ngIf="!can_post">
                <div class="editor {{theme}}">
                    <angular-editor  id="editor" [(ngModel)]="content" [config]="editorConfig"></angular-editor>
                </div>
                <input type="submit" [disabled]="content.length == 0 || content.length > 10_000" class="btn btn-primary" (click)="onSubmit()">
                <div *ngIf="error != ''" class="error">
                    <fa-icon [icon]="['fas', 'triangle-exclamation']"></fa-icon> {{error}}
                </div>
            </div>
        </div>
        <div class="list-footer">
            <!-- <button type="button" (click)="scrollToTop()">Back to top</button> -->
            <app-pagination [current_page]="current_page" [last_page]="last_page"
                (changePage)="changePage($event)"></app-pagination>
        </div>
    </div>
</div>