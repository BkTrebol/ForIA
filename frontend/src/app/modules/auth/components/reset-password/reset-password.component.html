<div class="form-page {{theme}}">
    <form *ngIf="!emailSend" [formGroup]="formSendEmail" (ngSubmit)="sendEmail()" class="form-container">
        <h2>{{"SEND_CONFIRMATION_EMAIL"|translate}}</h2>
        <h3 *ngIf="errorEmail"><fa-icon [icon]="['fas', 'circle-exclamation']"></fa-icon> {{errorEmail}}</h3>
        <h4 *ngIf="loading"><fa-icon [icon]="['fas', 'spinner']" [pulse]="true"></fa-icon> Loading ...</h4>
        <div class="fields">
            <div class="group">
                <div class="field">
                    <input type="email" autocomplete="email" formControlName="email" [(ngModel)]="email" class="input"
                        placeholder="Email" required>
                    <fa-icon class="icon" [icon]="['fas', 'envelope']"></fa-icon>
                </div>
                <div class="message-block" *ngIf="!gemail?.valid && gemail?.touched">
                    <ng-container *ngFor="let validation of validationMessagesSendEmail.email | keyvalue">
                        <div *ngIf="gemail?.errors?.[validation.key]">
                            <fa-icon [icon]="['fas', 'triangle-exclamation']"></fa-icon> {{ validation.value }}
                        </div>
                    </ng-container>
                </div>
            </div>
        </div>
        <div class="btn-field">
            <button [disabled]="!formSendEmail.valid || sending" class="btn-send" type="submit">
                <span *ngIf="sending" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                {{"SEND_CONFIRMATION_EMAIL"|translate}}
            </button>
            <fa-icon class="btn-icon" [icon]="['fas', 'thumbs-up']"></fa-icon>
        </div>
    </form>
    <form *ngIf="emailSend" [formGroup]="formResetPassword" (ngSubmit)="submit()" class="form-container">
        <h2>{{"RESET_PASSWORD"|translate}}</h2>
        <h3 *ngIf="error"><fa-icon [icon]="['fas', 'circle-exclamation']"></fa-icon> {{error}}</h3>
        <h4 *ngIf="loading"><fa-icon [icon]="['fas', 'spinner']" [pulse]="true"></fa-icon> Loading ...</h4>
        <div class="fields">
            <div class="group">
            </div>
            <div class="group">
                <div class="show">
                    <div class="field">
                        <input type="{{ canShow  ? 'text': 'password'}}" autocomplete="new-password" formControlName="password" class="input"
                            placeholder="{{'PASSWORD'|translate}}" [(ngModel)]="resetPasswordData.password" required>
                        <fa-icon class="icon" [icon]="['fas', 'lock']"></fa-icon>
                    </div>
                    <fa-icon class="eye" [icon]="['fas', canShow ? 'eye':'eye-slash']" (click)="changeShow()"></fa-icon>
                </div>
                <div class="message-block" *ngIf="!password?.valid && password?.touched">
                    <ng-container *ngFor="let validation of validationMessagesResetPassword.password | keyvalue">
                        <div *ngIf="password?.errors?.[validation.key]">
                            <fa-icon [icon]="['fas', 'triangle-exclamation']"></fa-icon> {{ validation.value }}
                        </div>
                    </ng-container>
                </div>
            </div>
            <div class="group">
                <div class="show">
                    <div class="field">
                        <input type="{{ canShowConf  ? 'text': 'password'}}" autocomplete="new-password" formControlName="password_confirmation"
                            class="input" placeholder="{{'PASSWORD_CONFIRMATION'|translate}}"
                            [(ngModel)]="resetPasswordData.password_confirmation" required>
                        <fa-icon class="icon" [icon]="['fas', 'lock']"></fa-icon>
                    </div>
                    <fa-icon class="eye" [icon]="['fas', canShowConf ? 'eye':'eye-slash']" (click)="changeShowConf()"></fa-icon>
                </div>
                <div class="message-block" *ngIf="!password_confirmation?.valid && password_confirmation?.touched">
                    <ng-container
                        *ngFor="let validation of validationMessagesResetPassword.password_confirmation | keyvalue">
                        <div *ngIf="password_confirmation?.errors?.[validation.key]">
                            <fa-icon [icon]="['fas', 'triangle-exclamation']"></fa-icon> {{ validation.value }}
                        </div>
                    </ng-container>
                </div>
            </div>
        </div>
        <div class="btn-field">
            <button [disabled]="!formResetPassword.valid" class="btn-send" type="submit">
                <span *ngIf="sending" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                {{"RESET_PASSWORD" | translate}}
            </button>
            <fa-icon class="btn-icon" [icon]="['fas', 'thumbs-up']"></fa-icon>
        </div>
        <div class="form-links">
            <p>{{'NEW_USER'|translate}} <a routerLink="/auth/register">{{'REGISTER'|translate}}</a></p>
        </div>
    </form>
</div>