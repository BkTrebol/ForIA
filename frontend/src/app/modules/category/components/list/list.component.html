<div class="list-page {{theme}}">
    <div class="loading" *ngIf="loading">
        <fa-icon [icon]="['fas', 'spinner']" [pulse]="true"></fa-icon>
        <p>Loading ...</p>
    </div>
    <div class="list" *ngIf="!loading">
        <div class="list-header">
            <img src="/assets/svg/logo.svg" height="100" alt="logo FORIA">
        </div>
        <div class="list-body">
            <ul>
                <li *ngFor="let section of forum" class="section">
                    <!-- <h1>{{section.name}}</h1> -->
                    <fieldset>
                        <legend>
                            <h1 (click)="toggle(section.name)">{{section.name}}</h1>
                        </legend>
                        <ul [ngClass]="{'ocult': ocults[section.name]}">
                            <li *ngFor="let category of section.categories" class="categories">
                                <div class="category" routerLink="/category/{{category.id}}">
                                    <h2>{{category.title}}</h2>
                                    <p>{{category.description}}</p>
                                    <img *ngIf="category.image" src="{{category.image}}"
                                        alt="Image of {{category.title}}">
                                </div>
                                <div class="last-post" *ngIf="category.lastPost">
                                    <div class="text">
                                        <h3><a routerLink="/topic/{{category.lastPost.topic.id}}"
                                                [queryParams]="{'page': category.lastPost.created_at}" fragment="last">
                                                {{ (category.lastPost.topic.title.length > 8) ?
                                                (category.lastPost.topic.title |
                                                slice:0:8)+'...':(category.lastPost.topic.title)}}</a></h3>
                                        <h4>
                                            <a
                                                routerLink="/user/profile/{{category.lastPost.user.id}}">{{category.lastPost.user.nick}}</a>
                                        </h4>
                                        <h5>{{category.lastPost.created_at | date}}</h5>
                                    </div>
                                    <div class="user">
                                        <app-avatar [user]="category.lastPost.user" [width]="'75'"
                                            [height]="'75'"></app-avatar>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </fieldset>
                </li>
            </ul>
        </div>
        <div class="list-footer">
            <button type="button" (click)="scrollToTop()">Back to top</button>
        </div>
    </div>
</div>