<div class="list-page {{theme}}">
    <div class="loading" *ngIf="loading">
        <fa-icon [icon]="['fas', 'spinner']" [pulse]="true"></fa-icon>
        <p>Loading ...</p>
    </div>
    <div class="list" *ngIf="!loading">
        <div class="list-header">
            <h1>{{category.title}}</h1>
            <a *ngIf="category.can_post" routerLink="/topic/create">Create new Topic</a>
        </div>
        <div class="list-body">
            <ul>
                <li class="topics" *ngFor="let topic of topics">
                    <div class="topic-user">
                        <app-avatar [user]="topic.user" width="75" height="75"></app-avatar>
                        <div class="topic-body">
                            <div class="title" routerLink="/topic/{{topic.id}}">
                                <h2>{{topic.title}}</h2>
                                <p>{{topic.description}}</p>
                            </div>
                            <div class="text">
                                <a routerLink="/user/profile/{{topic.user.id}}">{{topic.user.nick}}</a>
                                <small>{{topic.created_at | date}}</small>
                            </div>
                        </div>
                    </div>
                    <div class="topic-info">
                        <div class="topic-stats">
                            <p>3 posts</p>
                            <a routerLink="/topic/{{topic.id}}">1 poll</a>
                            <!-- <p>11 post<span *ngIf="topic.posts.length != 1">s</span></p> -->
                            <!-- <a *ngIf="topic.poll" routerLink="/topic/{{topic.id}}">1 poll</a> -->
                        </div>
                        <div class="last-post">
                            <div class="text">
                                <a
                                    routerLink="/user/profile/{{topic.last_post.user.id}}">{{topic.last_post.user.nick}}</a>
                                <small><a routerLink="/topic/{{topic.id}}" [queryParams]="{'page': topic.last_page}"
                                        fragment="last">{{topic.last_post.created_at | date}}</a>
                                </small>
                            </div>
                            <app-avatar [user]="topic.last_post.user" width="75" height="75"></app-avatar>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
        <div class="list-footer">
            <app-pagination [current_page]="current_page" [last_page]="last_page"
                (changePage)="changePage($event)"></app-pagination>
        </div>
    </div>
</div>